from dataclasses import dataclass, field
from typing import List, Dict


@dataclass
class Vacancy:
    key: str
    title: str
    description: str
    requirements: List[str]
    nice_to_have: List[str] = field(default_factory=list)
    questions: List[str] = field(default_factory=list)
    weights: Dict[str, float] = field(default_factory=dict)  # ключи = requirement, значения = вес 0..1


def sample_vacancies() -> Dict[str, Vacancy]:
    return {
        "python_se": Vacancy(
            key="python_se",
            title="Python Software Engineer",
            description=(
                "Разработка бэкенд-сервисов на Python, опыт с FastAPI/Aiohttp, SQL, тестирование, Docker."
            ),
            requirements=[
                "Python 3", "FastAPI или aiohttp", "SQL/PostgreSQL", "Юнит-тестирование",
                "Docker", "Асинхронность/asyncio", "Алгоритмы и структуры данных"
            ],
            nice_to_have=["Kubernetes", "CI/CD", "AWS/GCP/Azure"],
            questions=[
                "Коротко расскажите о вашем релевантном опыте в Python?",
                "Какой опыт у вас с веб-фреймворками (FastAPI/aiohttp/Django)?",
                "Опишите опыт работы с базами данных и оптимизацией запросов.",
                "Как вы тестируете код? Какие инструменты и подходы используете?",
                "Опишите опыт контейнеризации и деплоя (Docker/K8s/CI/CD).",
            ],
            weights={
                "Python 3": 0.18,
                "FastAPI или aiohttp": 0.18,
                "SQL/PostgreSQL": 0.16,
                "Юнит-тестирование": 0.14,
                "Docker": 0.12,
                "Асинхронность/asyncio": 0.12,
                "Алгоритмы и структуры данных": 0.10,
            },
        ),
        "ds": Vacancy(
            key="ds",
            title="Data Scientist",
            description=(
                "Моделирование, экспериментирование, ML-пайплайны, Python/NumPy/Pandas/Sklearn, визуализация, продовый опыт."
            ),
            requirements=[
                "ML классические алгоритмы", "Python/Numpy/Pandas", "Sklearn", "Эксперименты/валидация",
                "Визуализация", "Продакшн ML/инференс", "SQL"
            ],
            nice_to_have=["Deep Learning", "MLOps", "Cloud"],
            questions=[
                "Расскажите о проекте ML, которым вы гордитесь.",
                "Как вы выбираете и валидируете модели?",
                "Опишите ваш опыт продакшен-инференса и мониторинга.",
                "Как вы работаете с данными (очистка/фичеринг)?",
                "Опыт с SQL и визуализацией: инструменты, подходы.",
            ],
            weights={
                "ML классические алгоритмы": 0.17,
                "Python/Numpy/Pandas": 0.17,
                "Sklearn": 0.14,
                "Эксперименты/валидация": 0.16,
                "Визуализация": 0.10,
                "Продакшн ML/инференс": 0.16,
                "SQL": 0.10,
            },
        ),
        "ba": Vacancy(
            key="ba",
            title="Бизнес-аналитик",
            description="Анализ требований, постановка задач, сопровождение проектов в области антифрод-систем и банковского ПО.",
            requirements=[
                "Высшее техническое или экономическое образование",
                "Навыки подготовки бизнес-требований",
                "Microsoft Word/Excel/PowerPoint",
                "Анализ и оптимизация бизнес-процессов",
                "Опыт написания ТЗ/ФТ/методик",
            ],
            nice_to_have=[
                "Опыт работы с антифрод-системами",
                "Знание процессов ДБО ЮЛ",
                "Опыт с корпоративными картами",
                "Понимание СУБД и SQL",
                "Знание правил платёжных систем",
            ],
            questions=[
                "Опишите опыт подготовки бизнес-требований и постановки задач.",
                "Приходилось ли вам работать с антифрод или ПОД/ФТ-системами?",
                "Как вы взаимодействовали с разработчиками при постановке задач?",
                "Как вы тестируете реализованные требования?",
                "Опишите опыт работы с банковскими процессами (карты, ДБО и т.д.).",
            ],
            weights={
                "Высшее техническое или экономическое образование": 0.15,
                "Навыки подготовки бизнес-требований": 0.20,
                "Microsoft Word/Excel/PowerPoint": 0.10,
                "Анализ и оптимизация бизнес-процессов": 0.20,
                "Опыт написания ТЗ/ФТ/методик": 0.15,
                "Опыт работы с антифрод-системами": 0.20,
            },
        ),
        "it_specialist": Vacancy(
            key="it_specialist",
            title="Ведущий специалист ЦОД",
            description="Монтаж/демонтаж серверного и сетевого оборудования, подключение, настройка, диагностика и сопровождение работ в ЦОД.",
            requirements=[
                "Знание серверного оборудования х86",
                "Знание LAN/SAN сетей",
                "Опыт работы с кабельными системами (медь/оптика)",
                "Навыки диагностики серверов",
                "Excel/Word/Visio",
            ],
            nice_to_have=[
                "Опыт работы в ЦОД",
                "Навыки работы с CMDB/DCIM",
                "Опыт взаимодействия с подрядчиками",
                "Знание процедур эксплуатации серверных",
            ],
            questions=[
                "Опишите ваш опыт работы с серверным оборудованием х86.",
                "Есть ли у вас опыт диагностики и устранения инцидентов?",
                "Работали ли вы с системами CMDB/DCIM?",
                "Как вы документируете выполненные работы?",
                "Был ли у вас опыт работы с подрядчиками и обслуживанием ЦОД?",
            ],
            weights={
                "Знание серверного оборудования х86": 0.25,
                "Знание LAN/SAN сетей": 0.20,
                "Опыт работы с кабельными системами (медь/оптика)": 0.15,
                "Навыки диагностики серверов": 0.20,
                "Excel/Word/Visio": 0.10,
                "Опыт работы в ЦОД": 0.10,
            },
        ),
    }

VACANCIES: Dict[str, Vacancy] = sample_vacancies()